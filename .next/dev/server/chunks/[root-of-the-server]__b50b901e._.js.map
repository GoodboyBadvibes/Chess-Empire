{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/OneDrive/Desktop/code/Chess-Empire/shared/schema.ts"],"sourcesContent":["import { pgTable, text, serial, integer, boolean, timestamp } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\n// === TABLE DEFINITIONS ===\n\n// Roles/Jobs for the \"small but powerful team\"\nexport const roles = pgTable(\"roles\", {\n  id: serial(\"id\").primaryKey(),\n  title: text(\"title\").notNull(),\n  description: text(\"description\").notNull(),\n  category: text(\"category\").notNull(), // e.g., \"Media\", \"Design\", \"Engineering\"\n  isActive: boolean(\"is_active\").default(true),\n});\n\n// Applications from \"high-agency individuals\"\nexport const applications = pgTable(\"applications\", {\n  id: serial(\"id\").primaryKey(),\n  roleId: integer(\"role_id\").references(() => roles.id),\n  name: text(\"name\").notNull(),\n  email: text(\"email\").notNull(),\n  message: text(\"message\").notNull(), // \"Why you?\"\n  portfolioUrl: text(\"portfolio_url\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Products (Boards, Merch)\nexport const products = pgTable(\"products\", {\n  id: serial(\"id\").primaryKey(),\n  name: text(\"name\").notNull(),\n  description: text(\"description\").notNull(),\n  price: integer(\"price\").notNull(), // in cents\n  category: text(\"category\").notNull(), // \"Board\", \"Merch\", \"Digital\"\n  imageUrl: text(\"image_url\").notNull(),\n});\n\n// Stories (Human element)\nexport const stories = pgTable(\"stories\", {\n  id: serial(\"id\").primaryKey(),\n  title: text(\"title\").notNull(),\n  excerpt: text(\"excerpt\").notNull(),\n  content: text(\"content\").notNull(),\n  author: text(\"author\").notNull(),\n  imageUrl: text(\"image_url\"),\n  publishedAt: timestamp(\"published_at\").defaultNow(),\n});\n\n// === SCHEMAS ===\nexport const insertRoleSchema = createInsertSchema(roles).omit({ id: true });\nexport const insertApplicationSchema = createInsertSchema(applications).omit({ id: true, createdAt: true });\nexport const insertProductSchema = createInsertSchema(products).omit({ id: true });\nexport const insertStorySchema = createInsertSchema(stories).omit({ id: true, publishedAt: true });\n\n// === TYPES ===\nexport type Role = typeof roles.$inferSelect;\nexport type Application = typeof applications.$inferSelect;\nexport type Product = typeof products.$inferSelect;\nexport type Story = typeof stories.$inferSelect;\n\nexport type InsertApplication = z.infer<typeof insertApplicationSchema>;\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;AAMO,MAAM,QAAQ,IAAA,2QAAO,EAAC,SAAS;IACpC,IAAI,IAAA,sRAAM,EAAC,MAAM,UAAU;IAC3B,OAAO,IAAA,kRAAI,EAAC,SAAS,OAAO;IAC5B,aAAa,IAAA,kRAAI,EAAC,eAAe,OAAO;IACxC,UAAU,IAAA,kRAAI,EAAC,YAAY,OAAO;IAClC,UAAU,IAAA,wRAAO,EAAC,aAAa,OAAO,CAAC;AACzC;AAGO,MAAM,eAAe,IAAA,2QAAO,EAAC,gBAAgB;IAClD,IAAI,IAAA,sRAAM,EAAC,MAAM,UAAU;IAC3B,QAAQ,IAAA,wRAAO,EAAC,WAAW,UAAU,CAAC,IAAM,MAAM,EAAE;IACpD,MAAM,IAAA,kRAAI,EAAC,QAAQ,OAAO;IAC1B,OAAO,IAAA,kRAAI,EAAC,SAAS,OAAO;IAC5B,SAAS,IAAA,kRAAI,EAAC,WAAW,OAAO;IAChC,cAAc,IAAA,kRAAI,EAAC;IACnB,WAAW,IAAA,4RAAS,EAAC,cAAc,UAAU;AAC/C;AAGO,MAAM,WAAW,IAAA,2QAAO,EAAC,YAAY;IAC1C,IAAI,IAAA,sRAAM,EAAC,MAAM,UAAU;IAC3B,MAAM,IAAA,kRAAI,EAAC,QAAQ,OAAO;IAC1B,aAAa,IAAA,kRAAI,EAAC,eAAe,OAAO;IACxC,OAAO,IAAA,wRAAO,EAAC,SAAS,OAAO;IAC/B,UAAU,IAAA,kRAAI,EAAC,YAAY,OAAO;IAClC,UAAU,IAAA,kRAAI,EAAC,aAAa,OAAO;AACrC;AAGO,MAAM,UAAU,IAAA,2QAAO,EAAC,WAAW;IACxC,IAAI,IAAA,sRAAM,EAAC,MAAM,UAAU;IAC3B,OAAO,IAAA,kRAAI,EAAC,SAAS,OAAO;IAC5B,SAAS,IAAA,kRAAI,EAAC,WAAW,OAAO;IAChC,SAAS,IAAA,kRAAI,EAAC,WAAW,OAAO;IAChC,QAAQ,IAAA,kRAAI,EAAC,UAAU,OAAO;IAC9B,UAAU,IAAA,kRAAI,EAAC;IACf,aAAa,IAAA,4RAAS,EAAC,gBAAgB,UAAU;AACnD;AAGO,MAAM,mBAAmB,IAAA,yQAAkB,EAAC,OAAO,IAAI,CAAC;IAAE,IAAI;AAAK;AACnE,MAAM,0BAA0B,IAAA,yQAAkB,EAAC,cAAc,IAAI,CAAC;IAAE,IAAI;IAAM,WAAW;AAAK;AAClG,MAAM,sBAAsB,IAAA,yQAAkB,EAAC,UAAU,IAAI,CAAC;IAAE,IAAI;AAAK;AACzE,MAAM,oBAAoB,IAAA,yQAAkB,EAAC,SAAS,IAAI,CAAC;IAAE,IAAI;IAAM,aAAa;AAAK"}},
    {"offset": {"line": 144, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/OneDrive/Desktop/code/Chess-Empire/lib/db.ts"],"sourcesContent":["import \"dotenv/config\";\r\nimport { drizzle } from \"drizzle-orm/node-postgres\";\r\nimport pg from \"pg\";\r\nimport * as schema from \"@shared/schema\";\r\n\r\nconst { Pool } = pg;\r\n\r\nif (!process.env.DATABASE_URL) {\r\n  throw new Error(\r\n    \"DATABASE_URL must be set. Did you forget to provision a database?\",\r\n  );\r\n}\r\n\r\n// For serverless: use connection pooling via Supabase pooler\r\nconst pool = new Pool({ \r\n  connectionString: process.env.DATABASE_URL,\r\n  // Serverless-optimized settings\r\n  max: 1, // Limit connections for serverless\r\n  idleTimeoutMillis: 10000, // Close idle connections quickly\r\n});\r\n\r\nexport const db = drizzle(pool, { schema });\r\n\r\n// Database service class\r\nclass DatabaseService {\r\n  async getRoles() {\r\n    return await db.query.roles.findMany({\r\n      where: (roles, { eq }) => eq(roles.isActive, true),\r\n    });\r\n  }\r\n\r\n  async getRole(id: number) {\r\n    const [role] = await db.query.roles.findMany({\r\n      where: (roles, { eq }) => eq(roles.id, id),\r\n    });\r\n    return role;\r\n  }\r\n\r\n  async createRole(data: any) {\r\n    const [role] = await db.insert(schema.roles).values(data).returning();\r\n    return role;\r\n  }\r\n\r\n  async createApplication(data: any) {\r\n    const [app] = await db\r\n      .insert(schema.applications)\r\n      .values(data)\r\n      .returning();\r\n    return app;\r\n  }\r\n\r\n  async getProducts() {\r\n    return await db.query.products.findMany();\r\n  }\r\n\r\n  async createProduct(data: any) {\r\n    const [product] = await db.insert(schema.products).values(data).returning();\r\n    return product;\r\n  }\r\n\r\n  async getStories() {\r\n    return await db.query.stories.findMany();\r\n  }\r\n\r\n  async getStory(id: number) {\r\n    const [story] = await db.query.stories.findMany({\r\n      where: (stories, { eq }) => eq(stories.id, id),\r\n    });\r\n    return story;\r\n  }\r\n\r\n  async createStory(data: any) {\r\n    const [story] = await db.insert(schema.stories).values(data).returning();\r\n    return story;\r\n  }\r\n\r\n  // Seed database if needed\r\n  async seedDatabase() {\r\n    const roles = await this.getRoles();\r\n    if (roles.length > 0) return; // Already seeded\r\n\r\n    await this.createRole({\r\n      title: \"Head of Storytelling\",\r\n      description:\r\n        \"You will define the voice of the biggest chess company in the world. We need someone who understands narrative depth and human connection.\",\r\n      category: \"Media\",\r\n    });\r\n\r\n    await this.createRole({\r\n      title: \"Product Designer (Physical)\",\r\n      description:\r\n        \"Design luxury chess boards that are pieces of art. Experience with premium materials (wood, stone, metal) required.\",\r\n      category: \"Design\",\r\n    });\r\n\r\n    await this.createRole({\r\n      title: \"Founding Full Stack Engineer\",\r\n      description:\r\n        \"Build the digital ecosystem that connects the physical and media worlds. Next.js, React, Node.js expert.\",\r\n      category: \"Engineering\",\r\n    });\r\n\r\n    await this.createProduct({\r\n      name: \"The Grandmaster Edition\",\r\n      description: \"Hand-carved ebony and maple tournament board.\",\r\n      price: 49900,\r\n      category: \"Board\",\r\n      imageUrl:\r\n        \"https://images.unsplash.com/photo-1529699211952-734e80c4d42b?auto=format&fit=crop&q=80&w=1000\",\r\n    });\r\n\r\n    await this.createProduct({\r\n      name: \"Minimalist Travel Set\",\r\n      description: \"Magnetic, aerospace-grade aluminum pieces.\",\r\n      price: 15000,\r\n      category: \"Board\",\r\n      imageUrl:\r\n        \"https://images.unsplash.com/photo-1586165368502-1bad197a6461?auto=format&fit=crop&q=80&w=1000\",\r\n    });\r\n\r\n    await this.createProduct({\r\n      name: \"The Vision Hoodie\",\r\n      description: \"Heavyweight cotton, oversized fit. 'Bigger Than Chess' print.\",\r\n      price: 8500,\r\n      category: \"Merch\",\r\n      imageUrl:\r\n        \"https://images.unsplash.com/photo-1556821840-3a63f95609a7?auto=format&fit=crop&q=80&w=1000\",\r\n    });\r\n\r\n    await this.createStory({\r\n      title: \"The Art of Patience\",\r\n      excerpt: \"What 10 years of chess taught me about building a company.\",\r\n      content:\r\n        \"Chess is often misunderstood as a game of pure intellect. But at its core, it is a game of character...\",\r\n      author: \"Founder\",\r\n      imageUrl:\r\n        \"https://images.unsplash.com/photo-1580541832626-2a7131ee809f?auto=format&fit=crop&q=80&w=1000\",\r\n    });\r\n\r\n    await this.createStory({\r\n      title: \"Street Chess Culture\",\r\n      excerpt: \"From Union Square to the world. The raw energy of blitz.\",\r\n      content:\r\n        \"The clock slams. Trash talk flies. This isn't a quiet library. This is the arena...\",\r\n      author: \"Editorial Team\",\r\n      imageUrl:\r\n        \"https://images.unsplash.com/photo-1528819622765-d6bcf132f793?auto=format&fit=crop&q=80&w=1000\",\r\n    });\r\n  }\r\n}\r\n\r\nexport const Ce = new DatabaseService();\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 288, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/OneDrive/Desktop/code/Chess-Empire/app/api/products/route.ts"],"sourcesContent":["import { Ce } from \"@/lib/db\";\r\nimport { NextResponse } from \"next/server\";\r\n\r\nexport async function GET() {\r\n  try {\r\n    const products = await Ce.getProducts();\r\n    return NextResponse.json(products);\r\n  } catch (error) {\r\n    console.error(\"Error fetching products:\", error);\r\n    return NextResponse.json(\r\n      { message: \"Internal server error\" },\r\n      { status: 500 },\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;;;;;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,WAAW,MAAM,iHAAE,CAAC,WAAW;QACrC,OAAO,+PAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,OAAO,+PAAY,CAAC,IAAI,CACtB;YAAE,SAAS;QAAwB,GACnC;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}